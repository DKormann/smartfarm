var C=Object.defineProperty;var F=(t,e,s)=>e in t?C(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var u=(t,e,s)=>(F(t,typeof e!="symbol"?e+"":e,s),s);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))o(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const m of i.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&o(m)}).observe(document,{childList:!0,subtree:!0});function s(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerpolicy&&(i.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?i.credentials="include":n.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function o(n){if(n.ep)return;n.ep=!0;const i=s(n);fetch(n.href,i)}})();const g=["\u{1F42D}","\u{1F439}","\u{1F431}","\u{1F436}","\u{1F43B}","\u{1F42F}","\u{1F981}","\u{1F43C}","\u{1F438}","\u{1F432}"];class b{constructor(e){u(this,"value");u(this,"subscribers",new Set);this.value=e}subscribe(e){this.subscribers.add(e),e(this.value)}get(){return this.value}set(e){this.value=e,this.subscribers.forEach(s=>s(e))}update(e){this.set(e(this.value))}}const k=document.body;function l(t,e=!1){const s=document.createElement(t);return e&&k.appendChild(s),s}const E=l("h1",!0);E.textContent="Smart Farm";const h=new b(100),L=l("p",!0);h.subscribe(t=>{L.textContent=`bank: ${t}$`});const r=new b([]),v=l("div",!0);v.id="animals";const f=new b(0),x=l("p",!0);f.subscribe(t=>{var e;(e=navigator==null?void 0:navigator.vibrate)==null||e.call(navigator,[100,50,100]),x.textContent=`highscore: ${r.get().reduce((s,o)=>s+o.face(),"")}`});class y{constructor(e){u(this,"type");u(this,"element");u(this,"alive",!0);this.type=e,this.element=l("div",!0),this.element.textContent=this.face(),this.element.className="animal",setTimeout(()=>this.element.classList.add("active"),1)}remove(){this.alive=!1,this.element.classList.add("dead"),setTimeout(()=>{this.element.remove()},1e3)}face(){return g[this.type]}worth(){return this.alive?Math.pow(2,this.type):0}update(e){var n;const s=Math.random(),o=.3;if(s<o)return this.remove(),[];if(this.element.classList.remove("wiggle"),setTimeout(()=>{this.element.classList.add("wiggle")},1),s<o*2)if(e&&this.type+1<g.length)(n=navigator==null?void 0:navigator.vibrate)==null||n.call(navigator,20),this.type+=1,this.element.textContent=this.face();else{const i=new y(this.type);return this.element.insertAdjacentElement("afterend",i.element),i.element.classList.add("wiggle"),[this,i]}return[this]}}const d=l("button",!0),c=l("button",!0);d.className="bigbutton";c.className="bigbutton";d.id="button1";c.id="button2";d.textContent="Beef \u{1F356}";c.textContent="Broc \u{1F966}";function N(){if(r.get().length>0)return;h.set(h.get()-1);const t=new y(0);v.appendChild(t.element),r.set([t]),c.style.display="inline-block"}document.addEventListener("click",t=>{N()});d.onclick=()=>w(!0);c.onclick=()=>w(!1);function w(t=!1){r.update(e=>{let s=[];return e.forEach(o=>{o.alive&&s.push(...o.update(t))}),s})}l("p",!0);const a=l("button",!0);a.className="bigbutton";a.textContent="Sell";a.style.backgroundColor="grey";const p=l("p",!0);p.textContent="Click to start the game";a.onclick=()=>{const t=r.get().reduce((e,s)=>e+s.worth(),0);h.update(e=>e+t),r.get().forEach(e=>e.remove()),t>f.get()&&f.set(t),r.set([])};r.subscribe(t=>{if(t.length>0){p.style.display="none",a.style.display="inline-block",d.style.display="inline-block",c.style.display="inline-block";const e=t.reduce((s,o)=>s+o.worth(),0);a.textContent=`Sell for ${e}$`}else a.style.display="none",d.style.display="none",c.style.display="none",p.style.display="block"});
