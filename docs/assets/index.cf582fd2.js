var w=Object.defineProperty;var x=(n,e,t)=>e in n?w(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var u=(n,e,t)=>(x(n,typeof e!="symbol"?e+"":e,t),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const f of i.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&o(f)}).observe(document,{childList:!0,subtree:!0});function t(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerpolicy&&(i.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?i.credentials="include":s.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function o(s){if(s.ep)return;s.ep=!0;const i=t(s);fetch(s.href,i)}})();const g=["\u{1F42D}","\u{1F439}","\u{1F431}","\u{1F436}","\u{1F43B}","\u{1F42F}","\u{1F981}","\u{1F43C}","\u{1F438}","\u{1F432}"];class m{constructor(e){u(this,"value");u(this,"subscribers",new Set);this.value=e}subscribe(e){this.subscribers.add(e),e(this.value)}get(){return this.value}set(e){this.value=e,this.subscribers.forEach(t=>t(e))}update(e){this.set(e(this.value))}}const E=document.body;function r(n,e=!1){const t=document.createElement(n);return e&&E.appendChild(t),t}const k=r("h1",!0);k.textContent="Smart Farm";const h=new m(100),L=r("p",!0);h.subscribe(n=>{L.textContent=`bank: ${n}$`});const d=new m([]),v=r("div",!0);v.id="animals";const b=new m(0),N=r("p",!0);b.subscribe(n=>{var e;(e=navigator==null?void 0:navigator.vibrate)==null||e.call(navigator,[100,50,100]),N.textContent=`highscore: ${d.get().reduce((t,o)=>t+o.face(),"")}`});class p{constructor(e){u(this,"type");u(this,"element");u(this,"alive",!0);this.type=e,this.element=r("div",!0),this.element.textContent=this.face(),this.element.className="animal",setTimeout(()=>this.element.classList.add("active"),1)}remove(){this.alive=!1,this.element.classList.add("dead"),setTimeout(()=>{this.element.remove()},1e3)}face(){return g[this.type]}worth(){return this.alive?Math.pow(2,this.type):0}update(e){var o;const t=Math.random();if(t<e)return this.remove(),[];if(t<e*2)if(Math.random()<.5&&this.type+1<g.length)(o=navigator==null?void 0:navigator.vibrate)==null||o.call(navigator,20),this.type+=1,this.element.textContent=this.face();else{const s=new p(this.type);return this.element.insertAdjacentElement("afterend",s.element),[this,s]}return[this]}}const c=r("button",!0);c.className="bigbutton";c.textContent="Start Game";const l=r("button",!0);l.className="bigbutton";l.id="button2";l.textContent="Feed \u{1F966}";l.style.display="none";function F(){h.set(h.get()-1);const n=new p(0);v.appendChild(n.element),d.set([n]),c.textContent="Futtr \u{1F356}",l.style.display="inline-block",y.set(C)}const y=new m(F);c.onclick=()=>y.get()();l.onclick=()=>C(.2);function C(n=.5){var e;(e=navigator==null?void 0:navigator.vibrate)==null||e.call(navigator,100),d.update(t=>{let o=[];return t.forEach(s=>{s.alive&&o.push(...s.update(n))}),o})}r("p",!0);const a=r("button",!0);a.className="bigbutton";a.textContent="Sell";a.style.backgroundColor="grey";d.subscribe(n=>{if(n.length>0){a.style.display="inline-block",l.style.display="inline-block",c.textContent="Futtr \u{1F356}";const e=n.reduce((t,o)=>t+o.worth(),0);a.textContent=`Sell for ${e}$`,a.onclick=()=>{h.update(t=>t+e),n.forEach(t=>t.remove()),e>b.get()&&b.set(e),d.set([])}}else a.style.display="none",l.style.display="none",c.textContent="Start Game",y.set(F)});
