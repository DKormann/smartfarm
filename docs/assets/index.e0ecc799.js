var w=Object.defineProperty;var x=(n,e,t)=>e in n?w(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var a=(n,e,t)=>(x(n,typeof e!="symbol"?e+"":e,t),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const f of o.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&i(f)}).observe(document,{childList:!0,subtree:!0});function t(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerpolicy&&(o.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?o.credentials="include":s.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(s){if(s.ep)return;s.ep=!0;const o=t(s);fetch(s.href,o)}})();const g=["\u{1F42D}","\u{1F439}","\u{1F431}","\u{1F436}","\u{1F43B}","\u{1F42F}","\u{1F981}","\u{1F43C}","\u{1F438}","\u{1F432}"];class m{constructor(e){a(this,"value");a(this,"subscribers",new Set);this.value=e}subscribe(e){this.subscribers.add(e),e(this.value)}get(){return this.value}set(e){this.value=e,this.subscribers.forEach(t=>t(e))}update(e){this.set(e(this.value))}}const E=document.body;function r(n,e=!1){const t=document.createElement(n);return e&&E.appendChild(t),t}const k=r("h1",!0);k.textContent="Smart Farm";const h=new m(100),L=r("p",!0);h.subscribe(n=>{L.textContent=`bank: ${n}$`});const d=new m([]),v=r("div",!0);v.id="animals";const b=new m(0),N=r("p",!0);b.subscribe(n=>{N.textContent=`highscore: ${d.get().reduce((e,t)=>e+t.face(),"")}`});class p{constructor(e){a(this,"type");a(this,"element");a(this,"alive",!0);this.type=e,this.element=r("div",!0),this.element.textContent=this.face(),this.element.className="animal",setTimeout(()=>this.element.classList.add("active"),1)}remove(){this.alive=!1,this.element.classList.add("dead"),setTimeout(()=>{this.element.remove()},1e3)}face(){return g[this.type]}worth(){return this.alive?Math.pow(2,this.type):0}update(e){const t=Math.random();if(t<e)return this.remove(),[];if(t<e*2)if(Math.random()<.5&&this.type+1<g.length)this.type+=1,this.element.textContent=this.face();else{const i=new p(this.type);return this.element.insertAdjacentElement("afterend",i.element),[this,i]}return[this]}}const c=r("button",!0);c.className="bigbutton";c.textContent="Start Game";const l=r("button",!0);l.className="bigbutton";l.id="button2";l.textContent="Feed \u{1F966}";l.style.display="none";function F(){h.set(h.get()-1);const n=new p(0);v.appendChild(n.element),d.set([n]),c.textContent="Futtr \u{1F356}",l.style.display="inline-block",y.set(C)}const y=new m(F);c.onclick=()=>y.get()();l.onclick=()=>C(.2);function C(n=.5){d.update(e=>{let t=[];return e.forEach(i=>{i.alive&&t.push(...i.update(n))}),t})}r("p",!0);const u=r("button",!0);u.className="bigbutton";u.textContent="Sell";u.style.backgroundColor="grey";d.subscribe(n=>{if(n.length>0){u.style.display="inline-block",l.style.display="inline-block",c.textContent="Futtr \u{1F356}";const e=n.reduce((t,i)=>t+i.worth(),0);u.textContent=`Sell for ${e}$`,u.onclick=()=>{h.update(t=>t+e),n.forEach(t=>t.remove()),e>b.get()&&b.set(e),d.set([])}}else u.style.display="none",l.style.display="none",c.textContent="Start Game",y.set(F)});
