var F=Object.defineProperty;var C=(t,e,n)=>e in t?F(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var u=(t,e,n)=>(C(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const m of i.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&r(m)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerpolicy&&(i.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?i.credentials="include":s.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();const g=["\u{1F42D}","\u{1F439}","\u{1F431}","\u{1F436}","\u{1F43B}","\u{1F42F}","\u{1F981}","\u{1F43C}","\u{1F438}","\u{1F432}"];class b{constructor(e){u(this,"value");u(this,"subscribers",new Set);this.value=e}subscribe(e){this.subscribers.add(e),e(this.value)}get(){return this.value}set(e){this.value=e,this.subscribers.forEach(n=>n(e))}update(e){this.set(e(this.value))}}const E=document.body;function o(t,e=!1){const n=document.createElement(t);return e&&E.appendChild(n),n}const L=o("h1",!0);L.textContent="Smart Farm";const d=new b(100),x=o("p",!0);d.subscribe(t=>{x.textContent=`bank: ${t}$`});const l=new b([]),v=o("div",!0);v.id="animals";const f=new b(0),k=o("p",!0);f.subscribe(t=>{var e;(e=navigator==null?void 0:navigator.vibrate)==null||e.call(navigator,[100,50,100]),k.textContent=`highscore: ${l.get().reduce((n,r)=>n+r.face(),"")}`});class p{constructor(e){u(this,"type");u(this,"element");u(this,"alive",!0);this.type=e,this.element=o("div",!0),this.element.textContent=this.face(),this.element.className="animal",setTimeout(()=>this.element.classList.add("active"),1)}remove(){this.alive=!1,this.element.classList.add("dead"),setTimeout(()=>{this.element.remove()},1e3)}face(){return g[this.type]}worth(){return this.alive?Math.pow(2,this.type):0}update(e){var s;const n=Math.random(),r=.3;if(n<r)return this.remove(),[];if(this.element.classList.remove("wiggle"),setTimeout(()=>{this.element.classList.add("wiggle")},1),n<r*2)if(e&&this.type+1<g.length)(s=navigator==null?void 0:navigator.vibrate)==null||s.call(navigator,20),this.type+=1,this.element.textContent=this.face();else{const i=new p(this.type);return this.element.insertAdjacentElement("afterend",i.element),i.element.classList.add("wiggle"),[this,i]}return[this]}}const h=o("button",!0),c=o("button",!0);h.className="bigbutton";c.className="bigbutton";h.id="button1";c.id="button2";h.textContent="Beef \u{1F356}";c.textContent="Broc \u{1F966}";function y(){if(l.get().length>0)return;d.set(d.get()-1);const t=new p(0);v.appendChild(t.element),l.set([t]),c.style.display="inline-block"}y();document.addEventListener("click",t=>y());h.onclick=()=>w(!0);c.onclick=()=>w(!1);function w(t=!1){l.update(e=>{let n=[];return e.forEach(r=>{r.alive&&n.push(...r.update(t))}),n})}o("p",!0);const a=o("button",!0);a.className="bigbutton";a.textContent="Sell";a.style.backgroundColor="grey";a.onclick=()=>{const t=l.get().reduce((e,n)=>e+n.worth(),0);d.update(e=>e+t),l.get().forEach(e=>e.remove()),t>f.get()&&f.set(t),l.set([])};l.subscribe(t=>{if(t.length>0){const e=t.reduce((n,r)=>n+r.worth(),0);a.textContent=`Sell for ${e}$`}});
