var C=Object.defineProperty;var k=(t,e,n)=>e in t?C(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var c=(t,e,n)=>(k(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const m of i.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&o(m)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerpolicy&&(i.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?i.credentials="include":s.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function o(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();const g=["\u{1F42D}","\u{1F439}","\u{1F431}","\u{1F436}","\u{1F43B}","\u{1F42F}","\u{1F981}","\u{1F43C}","\u{1F438}","\u{1F432}"];class b{constructor(e){c(this,"value");c(this,"subscribers",new Set);this.value=e}subscribe(e){this.subscribers.add(e),e(this.value)}get(){return this.value}set(e){this.value=e,this.subscribers.forEach(n=>n(e))}update(e){this.set(e(this.value))}}const w=document.body;function r(t,e=!1){const n=document.createElement(t);return e&&w.appendChild(n),n}const x=r("h1",!0);x.textContent="Smart Farm";const h=new b(100),E=r("p",!0);h.subscribe(t=>{E.textContent=`bank: ${t}$`});const a=new b([]),v=r("div",!0);v.id="animals";const f=new b(0),L=r("p",!0);f.subscribe(t=>{var e;(e=navigator==null?void 0:navigator.vibrate)==null||e.call(navigator,[100,50,100]),L.textContent=`highscore: ${a.get().reduce((n,o)=>n+o.face(),"")}`});class y{constructor(e){c(this,"type");c(this,"element");c(this,"alive",!0);this.type=e,this.element=r("div",!0),this.element.textContent=this.face(),this.element.className="animal",setTimeout(()=>this.element.classList.add("active"),1)}remove(){this.alive=!1,this.element.classList.add("dead"),setTimeout(()=>{this.element.remove()},1e3)}face(){return g[this.type]}worth(){return this.alive?Math.pow(2,this.type):0}update(e){var s;const n=Math.random(),o=.3;if(n<o)return this.remove(),[];if(n<o*2)if(e&&this.type+1<g.length)(s=navigator==null?void 0:navigator.vibrate)==null||s.call(navigator,20),this.type+=1,this.element.textContent=this.face();else{const i=new y(this.type);return this.element.insertAdjacentElement("afterend",i.element),[this,i]}return[this]}}const d=r("button",!0);d.className="bigbutton";d.textContent="Futtr \u{1F356}";d.textContent="Start Game (1$)";const l=r("button",!0);l.className="bigbutton";l.id="button2";l.textContent="Feed \u{1F966}";l.style.display="none";function N(){if(a.get().length>0)return;h.set(h.get()-1);const t=new y(0);v.appendChild(t.element),a.set([t]),l.style.display="inline-block"}document.addEventListener("click",t=>{t.target==u||t.target==l||N()});d.onclick=()=>F(!0);l.onclick=()=>F(!1);function F(t=!1){a.update(e=>{let n=[];return e.forEach(o=>{o.alive&&n.push(...o.update(t))}),n})}r("p",!0);const u=r("button",!0);u.className="bigbutton";u.textContent="Sell";u.style.backgroundColor="grey";const p=r("p",!0);p.textContent="Click to start the game";u.onclick=()=>{const t=a.get().reduce((e,n)=>e+n.worth(),0);h.update(e=>e+t),a.get().forEach(e=>e.remove()),t>f.get()&&f.set(t),a.set([])};a.subscribe(t=>{if(t.length>0){p.style.display="none",u.style.display="inline-block",d.style.display="inline-block",l.style.display="inline-block";const e=t.reduce((n,o)=>n+o.worth(),0);u.textContent=`Sell for ${e}$`}else u.style.display="none",d.style.display="none",l.style.display="none",p.style.display="block"});
